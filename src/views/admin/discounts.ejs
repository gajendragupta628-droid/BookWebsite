<h1 class="font-display text-2xl mb-4">Discounts</h1>
<form method="post" class="grid md:grid-cols-6 gap-3 mb-6">
  <input type="hidden" name="_csrf" value="<%= csrfToken %>">
  <input name="code" placeholder="CODE" class="rounded bg-white/10 border-white/20" required>
  <select name="type" class="rounded bg-white/10 border-white/20">
    <option value="percent">Percent</option>
    <option value="fixed">Fixed</option>
  </select>
  <input name="amount" type="number" step="0.01" placeholder="Amount" class="rounded bg-white/10 border-white/20" required>
  <input name="minSubtotal" type="number" step="0.01" placeholder="Min subtotal" class="rounded bg-white/10 border-white/20">
  <input name="startsAt" type="date" class="rounded bg-white/10 border-white/20">
  <input name="endsAt" type="date" class="rounded bg-white/10 border-white/20">
  <input name="maxUses" type="number" placeholder="Max uses" class="rounded bg-white/10 border-white/20">
  <label class="inline-flex items-center gap-2 text-sm"><input type="checkbox" name="active"> Active</label>
  <div></div>
  <button class="px-4 py-2 rounded bg-gold text-charcoal">Add</button>
</form>
<div class="overflow-auto">
  <table class="min-w-full text-sm">
    <thead class="text-white/70"><tr><th class="text-left p-2">Code</th><th class="text-left p-2">Type</th><th class="text-left p-2">Amount</th><th class="text-left p-2">Active</th><th class="p-2"></th></tr></thead>
    <tbody>
      <% discounts.forEach(function(d){ %>
        <tr class="border-t border-white/10">
          <td class="p-2"><%= d.code %></td>
          <td class="p-2"><%= d.type %></td>
          <td class="p-2"><%= d.amount %></td>
          <td class="p-2"><%= d.active?'Yes':'No' %></td>
          <td class="p-2">
            <form method="post" action="/admin/discounts/<%= d._id %>/delete" onsubmit="return confirm('Delete?')">
              <input type="hidden" name="_csrf" value="<%= csrfToken %>">
              <button class="text-red-300">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>
